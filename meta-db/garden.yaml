kind: Module
name: meta-db-ctr
type: container
build:
  targetImage: main
  dependencies:
    - protobuf-base
buildArgs:
  # 127.0.0.1 registry is to get around kaniko bug
  PROTOBUF_BASE_IMAGE_REPO: "127.0.0.1:5000/package/"
  PROTOBUF_BASE_IMAGE_VERSION: ${modules.protobuf-base.version}
tests:
  - name: lint
    command: ["bash"]
    args: ["tests/lint.sh"]
  - name: unit
    command: ["pytest"]
    args: ["-v", "tests/unit"]

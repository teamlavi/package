kind: Project
name: package

environments:
  - name: dev
    defaultNamespace: dev-${local.env.LAVI_DEV_USER}
    variables:
      hostname: ${local.env.LAVI_DEV_USER}.lavi-lava.com
  - name: ci
    defaultNamespace: ci-${local.env.CI_ID}
    variables:
      hostname: ci-${local.env.CI_ID}.lavi-lava.com
  - name: prod
    defaultNamespace: prod
    variables:
      hostname: lavi-lava.com
    production: true

providers:
  - name: kubernetes
    context: vke-f1c7cfde-e72f-4b47-b331-e44d06bd74e2
    environments:
      - dev
      - ci
      - prod
    buildMode: kaniko
    kaniko:
      namespace: null
    setupIngressController: nginx
    defaultHostname: ${var.hostname}

defaultEnvironment: dev
